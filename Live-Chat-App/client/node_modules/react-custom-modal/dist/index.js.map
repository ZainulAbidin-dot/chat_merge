{"version":3,"file":"index.js","sources":["../src/Portal.js","../src/DisabledLayer.js","../src/Modal.js"],"sourcesContent":["import {Component} from 'react'\nimport * as ReactDOM from 'react-dom'\nimport PropTypes from 'prop-types'\n\nconst body = document.body\n\nexport default class Portal extends Component {\n  constructor(props) {\n    super(props)\n    this.el = document.createElement('div')\n  }\n\n  componentDidMount() {\n    body.appendChild(this.el)\n  }\n\n  componentWillUnmount() {\n    body.removeChild(this.el)\n  }\n\n  render() {\n    return ReactDOM.createPortal(this.props.children, this.el)\n  }\n}\n\nPortal.propTypes = {\n  children: PropTypes.node\n}\n","import React, {Component} from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class DisabledLayer extends Component {\n  render() {\n    if (!this.props.show) {\n      return null\n    }\n\n    return (\n      <div className='DisabledLayer'\n           onClick={() => false}/>\n    )\n  }\n}\n\nDisabledLayer.propTypes = {\n  show: PropTypes.bool.isRequired\n}\n","import React, {Component} from 'react'\nimport Portal from './Portal'\nimport DisabledLayer from './DisabledLayer'\nimport PropTypes from 'prop-types'\n\nexport default class Modal extends Component {\n\n  closeDelayTime = 250\n\n  constructor(props) {\n    super(props)\n    this.state = {show: false, closing: false}\n    this.close = this.close.bind(this)\n    this.closeImmediate = this.closeImmediate.bind(this)\n  }\n\n  show(options) {\n    clearTimeout(this.closeTimer)\n\n    let props = {\n      close: this.close,\n      closeImmediate: this.closeImmediate\n    }\n    let component = options.render\n      ? options.render(props)\n      : React.cloneElement(options.component, props)\n\n    this.options = options\n    this.component = component\n    this.setState({\n      show: true,\n      closing: false\n    })\n  }\n\n  close() {\n    this.setState({\n      show: false,\n      closing: true\n    })\n\n    this.closeTimer = setTimeout(() => {\n      this.setState({\n        closing: false\n      })\n      this.component = null\n    }, this.closeDelayTime)\n  }\n\n  closeImmediate() {\n    clearTimeout(this.closeTimer)\n    this.setState({\n      show: false,\n      closing: false\n    })\n    this.component = null\n  }\n\n  render() {\n    const {show, closing} = this.state\n    if (!show && !closing) {\n      return null\n    }\n\n    const {full, animation} = this.options\n    let _modalClassList = [\n      'Modal',\n      this.props.className || '',\n      full ? 'full' : '',\n      closing ? 'closing' : ''\n    ]\n\n    let _dialogClassList = [\n      'ModalDialog',\n      animation || '',\n      this.props.dialogClass || '',\n      closing ? 'closing' : ''\n    ]\n\n    return (\n      <Portal>\n        <div className={_modalClassList.join(' ')}>\n          <DisabledLayer show/>\n          <div className='ModalWrapper'>\n            <div className={_dialogClassList.join(' ')}>\n              {this.component}\n            </div>\n          </div>\n        </div>\n      </Portal>\n    )\n  }\n}\n\nModal.propTypes = {\n  className: PropTypes.string,\n  dialogClass: PropTypes.string\n}\n"],"names":["body","document","Portal","props","el","createElement","appendChild","removeChild","ReactDOM","children","Component","propTypes","PropTypes","node","DisabledLayer","show","React","bool","isRequired","Modal","closeDelayTime","state","closing","close","bind","closeImmediate","options","closeTimer","component","render","cloneElement","setState","setTimeout","full","animation","_modalClassList","className","_dialogClassList","dialogClass","join","string"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,IAAMA,OAAOC,SAASD,IAAtB;;IAEqBE;;;kBACPC,KAAZ,EAAmB;;;+GACXA,KADW;;UAEZC,EAAL,GAAUH,SAASI,aAAT,CAAuB,KAAvB,CAAV;;;;;;wCAGkB;WACbC,WAAL,CAAiB,KAAKF,EAAtB;;;;2CAGqB;WAChBG,WAAL,CAAiB,KAAKH,EAAtB;;;;6BAGO;aACAI,qBAAA,CAAsB,KAAKL,KAAL,CAAWM,QAAjC,EAA2C,KAAKL,EAAhD,CAAP;;;;EAfgCM;;;AAmBpCR,OAAOS,SAAP,GAAmB;YACPC,UAAUC;CADtB;;ICtBqBC;;;;;;;;;;6BACV;UACH,CAAC,KAAKX,KAAL,CAAWY,IAAhB,EAAsB;eACb,IAAP;;;aAIAC,sCAAK,WAAU,eAAf;iBACc;iBAAM,KAAN;SADd,GADF;;;;EANuCN;;;AAa3CI,cAAcH,SAAd,GAA0B;QAClBC,UAAUK,IAAV,CAAeC;CADvB;;ICXqBC;;;iBAIPhB,KAAZ,EAAmB;;;6GACXA,KADW;;UAFnBiB,cAEmB,GAFF,GAEE;;UAEZC,KAAL,GAAa,EAACN,MAAM,KAAP,EAAcO,SAAS,KAAvB,EAAb;UACKC,KAAL,GAAa,MAAKA,KAAL,CAAWC,IAAX,OAAb;UACKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBD,IAApB,OAAtB;;;;;;yBAGGE,SAAS;mBACC,KAAKC,UAAlB;;UAEIxB,QAAQ;eACH,KAAKoB,KADF;wBAEM,KAAKE;OAFvB;UAIIG,YAAYF,QAAQG,MAAR,GACZH,QAAQG,MAAR,CAAe1B,KAAf,CADY,GAEZa,eAAMc,YAAN,CAAmBJ,QAAQE,SAA3B,EAAsCzB,KAAtC,CAFJ;;WAIKuB,OAAL,GAAeA,OAAf;WACKE,SAAL,GAAiBA,SAAjB;WACKG,QAAL,CAAc;cACN,IADM;iBAEH;OAFX;;;;4BAMM;;;WACDA,QAAL,CAAc;cACN,KADM;iBAEH;OAFX;;WAKKJ,UAAL,GAAkBK,WAAW,YAAM;eAC5BD,QAAL,CAAc;mBACH;SADX;eAGKH,SAAL,GAAiB,IAAjB;OAJgB,EAKf,KAAKR,cALU,CAAlB;;;;qCAQe;mBACF,KAAKO,UAAlB;WACKI,QAAL,CAAc;cACN,KADM;iBAEH;OAFX;WAIKH,SAAL,GAAiB,IAAjB;;;;6BAGO;mBACiB,KAAKP,KADtB;UACAN,IADA,UACAA,IADA;UACMO,OADN,UACMA,OADN;;UAEH,CAACP,IAAD,IAAS,CAACO,OAAd,EAAuB;eACd,IAAP;;;qBAGwB,KAAKI,OANxB;UAMAO,IANA,YAMAA,IANA;UAMMC,SANN,YAMMA,SANN;;UAOHC,kBAAkB,CACpB,OADoB,EAEpB,KAAKhC,KAAL,CAAWiC,SAAX,IAAwB,EAFJ,EAGpBH,OAAO,MAAP,GAAgB,EAHI,EAIpBX,UAAU,SAAV,GAAsB,EAJF,CAAtB;;UAOIe,mBAAmB,CACrB,aADqB,EAErBH,aAAa,EAFQ,EAGrB,KAAK/B,KAAL,CAAWmC,WAAX,IAA0B,EAHL,EAIrBhB,UAAU,SAAV,GAAsB,EAJD,CAAvB;;aAQEN;cAAA;;;;YACO,WAAWmB,gBAAgBI,IAAhB,CAAqB,GAArB,CAAhB;uCACG,aAAD,IAAe,UAAf,GADF;;;cAEO,WAAU,cAAf;;;gBACO,WAAWF,iBAAiBE,IAAjB,CAAsB,GAAtB,CAAhB;mBACQX;;;;OANhB;;;;EA1E+BlB;;;AAyFnCS,MAAMR,SAAN,GAAkB;aACLC,UAAU4B,MADL;eAEH5B,UAAU4B;CAFzB;;;;;;"}